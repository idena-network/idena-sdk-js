/*!
 * idena-sdk-js v0.0.1
 * (c) idena
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("long"),require("protobufjs/minimal"),require("bn.js"),require("js-sha3"),require("secp256k1")):"function"==typeof define&&define.amd?define(["exports","long","protobufjs/minimal","bn.js","js-sha3","secp256k1"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).idenaSdkJs={},e.Long,e._m0,e.BN,e.sha3,e.secp256k1)}(this,(function(e,t,n,i,o,r){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s=a(t),l=u(n),d=a(i),c=a(o),p=a(r);function y(){return{data:void 0,signature:new Uint8Array,useRlp:!1}}const h={encode:(e,t=l.Writer.create())=>(void 0!==e.data&&v.encode(e.data,t.uint32(10).fork()).ldelim(),0!==e.signature.length&&t.uint32(18).bytes(e.signature),!0===e.useRlp&&t.uint32(24).bool(e.useRlp),t),decode(e,t){const n=e instanceof l.Reader?e:new l.Reader(e);let i=void 0===t?n.len:n.pos+t;const o=y();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:o.data=v.decode(n,n.uint32());break;case 2:o.signature=n.bytes();break;case 3:o.useRlp=n.bool();break;default:n.skipType(7&e)}}return o},fromJSON:e=>({data:w(e.data)?v.fromJSON(e.data):void 0,signature:w(e.signature)?x(e.signature):new Uint8Array,useRlp:!!w(e.useRlp)&&Boolean(e.useRlp)}),toJSON(e){const t={};return void 0!==e.data&&(t.data=e.data?v.toJSON(e.data):void 0),void 0!==e.signature&&(t.signature=T(void 0!==e.signature?e.signature:new Uint8Array)),void 0!==e.useRlp&&(t.useRlp=e.useRlp),t},fromPartial(e){var t,n;const i=y();return i.data=void 0!==e.data&&null!==e.data?v.fromPartial(e.data):void 0,i.signature=null!==(t=e.signature)&&void 0!==t?t:new Uint8Array,i.useRlp=null!==(n=e.useRlp)&&void 0!==n&&n,i}};function f(){return{nonce:0,epoch:0,type:0,to:new Uint8Array,amount:new Uint8Array,maxFee:new Uint8Array,tips:new Uint8Array,payload:new Uint8Array}}const v={encode:(e,t=l.Writer.create())=>(0!==e.nonce&&t.uint32(8).uint32(e.nonce),0!==e.epoch&&t.uint32(16).uint32(e.epoch),0!==e.type&&t.uint32(24).uint32(e.type),0!==e.to.length&&t.uint32(34).bytes(e.to),0!==e.amount.length&&t.uint32(42).bytes(e.amount),0!==e.maxFee.length&&t.uint32(50).bytes(e.maxFee),0!==e.tips.length&&t.uint32(58).bytes(e.tips),0!==e.payload.length&&t.uint32(66).bytes(e.payload),t),decode(e,t){const n=e instanceof l.Reader?e:new l.Reader(e);let i=void 0===t?n.len:n.pos+t;const o=f();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:o.nonce=n.uint32();break;case 2:o.epoch=n.uint32();break;case 3:o.type=n.uint32();break;case 4:o.to=n.bytes();break;case 5:o.amount=n.bytes();break;case 6:o.maxFee=n.bytes();break;case 7:o.tips=n.bytes();break;case 8:o.payload=n.bytes();break;default:n.skipType(7&e)}}return o},fromJSON:e=>({nonce:w(e.nonce)?Number(e.nonce):0,epoch:w(e.epoch)?Number(e.epoch):0,type:w(e.type)?Number(e.type):0,to:w(e.to)?x(e.to):new Uint8Array,amount:w(e.amount)?x(e.amount):new Uint8Array,maxFee:w(e.maxFee)?x(e.maxFee):new Uint8Array,tips:w(e.tips)?x(e.tips):new Uint8Array,payload:w(e.payload)?x(e.payload):new Uint8Array}),toJSON(e){const t={};return void 0!==e.nonce&&(t.nonce=Math.round(e.nonce)),void 0!==e.epoch&&(t.epoch=Math.round(e.epoch)),void 0!==e.type&&(t.type=Math.round(e.type)),void 0!==e.to&&(t.to=T(void 0!==e.to?e.to:new Uint8Array)),void 0!==e.amount&&(t.amount=T(void 0!==e.amount?e.amount:new Uint8Array)),void 0!==e.maxFee&&(t.maxFee=T(void 0!==e.maxFee?e.maxFee:new Uint8Array)),void 0!==e.tips&&(t.tips=T(void 0!==e.tips?e.tips:new Uint8Array)),void 0!==e.payload&&(t.payload=T(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,n,i,o,r,a,u,s;const l=f();return l.nonce=null!==(t=e.nonce)&&void 0!==t?t:0,l.epoch=null!==(n=e.epoch)&&void 0!==n?n:0,l.type=null!==(i=e.type)&&void 0!==i?i:0,l.to=null!==(o=e.to)&&void 0!==o?o:new Uint8Array,l.amount=null!==(r=e.amount)&&void 0!==r?r:new Uint8Array,l.maxFee=null!==(a=e.maxFee)&&void 0!==a?a:new Uint8Array,l.tips=null!==(u=e.tips)&&void 0!==u?u:new Uint8Array,l.payload=null!==(s=e.payload)&&void 0!==s?s:new Uint8Array,l}};var m=(()=>{if(void 0!==m)return m;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();const g=m.atob||(e=>m.Buffer.from(e,"base64").toString("binary"));function x(e){const t=g(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const b=m.btoa||(e=>m.Buffer.from(e,"binary").toString("base64"));function T(e){const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),b(t.join(""))}function w(e){return null!=e}function A(e){return"string"!=typeof e?e:function(e){return"0x"===e.slice(0,2)}(e)?e.slice(2):e}function _(e){const t=A(e),n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const i=parseInt(t.substring(e,e+2),16);n[e/2]=i}return n}function U(e,t=!1){return(t?"0x":"")+Array.from(e,(function(e){return`0${(255&e).toString(16)}`.slice(-2)})).join("")}function S(e){return"string"==typeof e?_(e):new Uint8Array(e)}function F(e,t=!0){return U(c.default.keccak_256.array(S(e).slice(1)).slice(12),t)}function k(e,t,n=!0){const i=c.default.keccak_256.array(e);return F(p.default.ecdsaRecover(new Uint8Array(t).slice(0,-1),Number(t[t.length-1]),new Uint8Array(i),!1),n)}function j(e,t){const n=c.default.keccak_256.array(e),{signature:i,recid:o}=p.default.ecdsaSign(new Uint8Array(n),"string"==typeof t?_(t):new Uint8Array(t));return new Uint8Array([...i,o])}var C;l.util.Long!==s.default&&(l.util.Long=s.default,l.configure()),e.TransactionType=void 0,(C=e.TransactionType||(e.TransactionType={}))[C.SendTx=0]="SendTx",C[C.ActivationTx=1]="ActivationTx",C[C.InviteTx=2]="InviteTx",C[C.KillTx=3]="KillTx",C[C.SubmitFlipTx=4]="SubmitFlipTx",C[C.SubmitAnswersHashTx=5]="SubmitAnswersHashTx",C[C.SubmitShortAnswersTx=6]="SubmitShortAnswersTx",C[C.SubmitLongAnswersTx=7]="SubmitLongAnswersTx",C[C.EvidenceTx=8]="EvidenceTx",C[C.OnlineStatusTx=9]="OnlineStatusTx",C[C.KillInviteeTx=10]="KillInviteeTx",C[C.ChangeGodAddressTx=11]="ChangeGodAddressTx",C[C.BurnTx=12]="BurnTx",C[C.ChangeProfileTx=13]="ChangeProfileTx",C[C.DeleteFlipTx=14]="DeleteFlipTx",C[C.DeployContractTx=15]="DeployContractTx",C[C.CallContractTx=16]="CallContractTx",C[C.TerminateContractTx=17]="TerminateContractTx",C[C.DelegateTx=18]="DelegateTx",C[C.UndelegateTx=19]="UndelegateTx",C[C.KillDelegatorTx=20]="KillDelegatorTx",C[C.StoreToIpfsTx=21]="StoreToIpfsTx";e.Transaction=class{constructor(e){var t,n,i,o,r,a,u,s;this._nonce=0,this._epoch=0,this._type=0,this._to=null,this._amount=null,this._maxFee=null,this._tips=null,this._payload=null,this._signature=null,this.nonce=null!==(t=null==e?void 0:e.nonce)&&void 0!==t?t:0,this.epoch=null!==(n=null==e?void 0:e.epoch)&&void 0!==n?n:0,this.type=null!==(i=null==e?void 0:e.type)&&void 0!==i?i:0,this.to=null!==(o=null==e?void 0:e.to)&&void 0!==o?o:null,this.amount=null!==(r=null==e?void 0:e.amount)&&void 0!==r?r:null,this.maxFee=null!==(a=null==e?void 0:e.maxFee)&&void 0!==a?a:null,this.tips=null!==(u=null==e?void 0:e.tips)&&void 0!==u?u:null,this.payload=null!==(s=null==e?void 0:e.payload)&&void 0!==s?s:null}set nonce(e){this._nonce=e}get nonce(){return this._nonce}set epoch(e){this._epoch=e}get epoch(){return this._epoch}set type(e){this._type=e}get type(){return this._type}set to(e){null===e?this._to=null:e instanceof Uint8Array?this._to=e:this._to=_(e)}get to(){return this._to?U(this._to):null}set amount(e){this._amount=null!==e?new d.default(e):null}get amount(){return this._amount}set maxFee(e){this._maxFee=null!==e?new d.default(e):null}get maxFee(){return this._maxFee}set tips(e){this._tips=null!==e?new d.default(e):null}get tips(){return this._tips}set payload(e){this._payload=e}get payload(){return this._payload?new Uint8Array(this._payload):null}get signature(){return this._signature}get hash(){return Buffer.from(c.default.keccak_256.array(this.toBytes())).toString("hex")}get sender(){if(!this._signature)return null;return k(v.encode(this._createProtoTxData()).finish(),this._signature,!0)}fromBytes(e){const t=h.decode(e).data;return t&&(this.nonce=t.nonce,this.epoch=t.epoch,this.type=t.type,this.to=t.to,this.amount=t.amount,this.maxFee=t.maxFee,this.tips=t.tips,this.payload=t.payload),this}toBytes(){var e;const t=h.fromPartial({data:this._createProtoTxData(),signature:null!==(e=this._signature)&&void 0!==e?e:new Uint8Array});return h.encode(t).finish()}sign(e){const t=v.encode(this._createProtoTxData()).finish();return this._signature=j(t,e),this}_createProtoTxData(){var e,t,n,i,o,r,a,u;return v.fromPartial({epoch:this._epoch,nonce:this._nonce,type:this._type,to:null!==(e=this._to)&&void 0!==e?e:new Uint8Array,amount:null!==(n=null===(t=this._amount)||void 0===t?void 0:t.toBuffer())&&void 0!==n?n:new Uint8Array,maxFee:null!==(o=null===(i=this._maxFee)||void 0===i?void 0:i.toBuffer())&&void 0!==o?o:new Uint8Array,tips:null!==(a=null===(r=this._tips)||void 0===r?void 0:r.toBuffer())&&void 0!==a?a:new Uint8Array,payload:null!==(u=this._payload)&&void 0!==u?u:new Uint8Array})}},e.hexToUint8Array=_,e.privateKeyToAddress=function(e,t=!0){return e?F(p.default.publicKeyCreate(S(e),!1),t):"0x0000000000000000000000000000000000000000"},e.privateKeyToPublicKey=function(e,t=!1){return U(p.default.publicKeyCreate(S(e),!1),t)},e.publicKeyToAddress=F,e.sender=k,e.sign=j,e.stripHexPrefix=A,e.toHexString=U,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
